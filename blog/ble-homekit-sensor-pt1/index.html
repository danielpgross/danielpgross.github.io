<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f628065b851287e306e5.css">@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:100;src:local("IBM Plex Sans Thin "),local("IBM Plex Sans-Thin"),url(/static/ibm-plex-sans-latin-100-245539db8ee56425757ef728eda8194e.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-100-9a582f3a304f421eca4027517706843c.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:100;src:local("IBM Plex Sans Thin italic"),local("IBM Plex Sans-Thinitalic"),url(/static/ibm-plex-sans-latin-100italic-3c34cf080b38f5fb1d4c59ffa45b3967.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-100italic-1ea7c5d21b5956b602bdf9656cfb353f.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:200;src:local("IBM Plex Sans Extra Light "),local("IBM Plex Sans-Extra Light"),url(/static/ibm-plex-sans-latin-200-bf72c8412ab06c393f52efc5beb26ea7.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-200-67524c36348a323f78f2845e3aafc2d4.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:200;src:local("IBM Plex Sans Extra Light italic"),local("IBM Plex Sans-Extra Lightitalic"),url(/static/ibm-plex-sans-latin-200italic-bbc2d55223638ce450424a917e1104b2.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-200italic-52df25607ec284ca361ae50ba24b3580.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:300;src:local("IBM Plex Sans Light "),local("IBM Plex Sans-Light"),url(/static/ibm-plex-sans-latin-300-9e1c48af24191f6ea8aede14957c5d01.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-300-10bb6a0ae6dc8000d999ab622a45e281.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:300;src:local("IBM Plex Sans Light italic"),local("IBM Plex Sans-Lightitalic"),url(/static/ibm-plex-sans-latin-300italic-c76f2ab53673e964b6e6734c1c455761.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-300italic-d3566d5bb4f31d86bfb9fda09563b416.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:400;src:local("IBM Plex Sans Regular "),local("IBM Plex Sans-Regular"),url(/static/ibm-plex-sans-latin-400-263d6267533501f58c33b12b382e3abb.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-400-a2c56f946488a9a267ba6ba21471a217.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:400;src:local("IBM Plex Sans Regular italic"),local("IBM Plex Sans-Regularitalic"),url(/static/ibm-plex-sans-latin-400italic-89a93a1bdde48c7bb104150de88affce.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-400italic-272f86114c980c52c131dfc3b4ae3276.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:500;src:local("IBM Plex Sans Medium "),local("IBM Plex Sans-Medium"),url(/static/ibm-plex-sans-latin-500-0866c24487514ad726738fb24f8e015b.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-500-f6d5c5d5b849796d6a8f5a2953b60753.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:500;src:local("IBM Plex Sans Medium italic"),local("IBM Plex Sans-Mediumitalic"),url(/static/ibm-plex-sans-latin-500italic-ffd12d59339823b8cf53b9f99b47d87c.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-500italic-ccd41bd1a5bfa8bad2cd8d35fdaeb3d1.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:600;src:local("IBM Plex Sans SemiBold "),local("IBM Plex Sans-SemiBold"),url(/static/ibm-plex-sans-latin-600-7852d4dc26ef44df58e23dc0b9722d6f.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-600-337b16517a230dc830b84dc6e6167b68.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:600;src:local("IBM Plex Sans SemiBold italic"),local("IBM Plex Sans-SemiBolditalic"),url(/static/ibm-plex-sans-latin-600italic-17e5379fd9a99b9bcb26ea983f391b6a.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-600italic-6f4ba6aa87fa99d5bc2b90a7b40a0ded.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:700;src:local("IBM Plex Sans Bold "),local("IBM Plex Sans-Bold"),url(/static/ibm-plex-sans-latin-700-c9983d3d04f3ed6c2eafee1db1d24e06.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-700-b8809d619a33eb825b0450281ff752e7.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:700;src:local("IBM Plex Sans Bold italic"),local("IBM Plex Sans-Bolditalic"),url(/static/ibm-plex-sans-latin-700italic-02954beec9e742bb1f3ae27b7e7cb71f.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-700italic-72e9af409ddafc63a5dd380e34758560.woff) format("woff")}</style><meta name="generator" content="Gatsby 2.26.1"/><link rel="alternate" type="application/rss+xml" title="Minimal Blog - @lekoarts/gatsby-theme-minimal-blog" href="/rss.xml"/><title data-react-helmet="true">Building a battery-powered wireless sensor using Bluetooth Low-Energy (BLE) and Apple HomeKit (Part 1) | Daniel P. Gross</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><meta data-react-helmet="true" name="description" content="In this series, we&#x27;ll look at building a simple wireless temperature and humidity sensor using inexpensive components and Bluetooth Low…"/><meta data-react-helmet="true" name="image" content="https://dgross.ca/banner.jpg"/><meta data-react-helmet="true" property="og:title" content="Building a battery-powered wireless sensor using Bluetooth Low-Energy (BLE) and Apple HomeKit (Part 1)"/><meta data-react-helmet="true" property="og:url" content="https://dgross.ca/blog/ble-homekit-sensor-pt1"/><meta data-react-helmet="true" property="og:description" content="In this series, we&#x27;ll look at building a simple wireless temperature and humidity sensor using inexpensive components and Bluetooth Low…"/><meta data-react-helmet="true" property="og:image" content="https://dgross.ca/banner.jpg"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:image:alt" content="In this series, we&#x27;ll look at building a simple wireless temperature and humidity sensor using inexpensive components and Bluetooth Low…"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Building a battery-powered wireless sensor using Bluetooth Low-Energy (BLE) and Apple HomeKit (Part 1)"/><meta data-react-helmet="true" name="twitter:url" content="https://dgross.ca/blog/ble-homekit-sensor-pt1"/><meta data-react-helmet="true" name="twitter:description" content="In this series, we&#x27;ll look at building a simple wireless temperature and humidity sensor using inexpensive components and Bluetooth Low…"/><meta data-react-helmet="true" name="twitter:image" content="https://dgross.ca/banner.jpg"/><meta data-react-helmet="true" name="twitter:image:alt" content="In this series, we&#x27;ll look at building a simple wireless temperature and humidity sensor using inexpensive components and Bluetooth Low…"/><meta data-react-helmet="true" name="twitter:creator" content="@danielpgross"/><meta data-react-helmet="true" name="gatsby-theme" content="@lekoarts/gatsby-theme-minimal-blog"/><link as="script" rel="preload" href="/webpack-runtime-0b36765783ddb57012e0.js"/><link as="script" rel="preload" href="/framework-beda7bde9d7dca0755ce.js"/><link as="script" rel="preload" href="/1bfc9850-ae6f6e854d81acd9ae43.js"/><link as="script" rel="preload" href="/app-61629059a767a2c5dd4b.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/aed2e917f30c051bccba91aa15989a75fd0bd633-7af1ba497f02303e5a48.js"/><link as="script" rel="preload" href="/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-82ea993409075bcdefe9.js"/><link as="fetch" rel="preload" href="/page-data/blog/ble-homekit-sensor-pt1/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3090400250.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3090400250.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/318001574.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="9096aj">body{--theme-ui-colors-transparent:var(--theme-ui-colors-transparent,transparent);--theme-ui-colors-black:var(--theme-ui-colors-black,#000);--theme-ui-colors-white:var(--theme-ui-colors-white,#fff);--theme-ui-colors-gray-0:var(--theme-ui-colors-gray-0,null);--theme-ui-colors-gray-1:var(--theme-ui-colors-gray-1,#f7fafc);--theme-ui-colors-gray-2:var(--theme-ui-colors-gray-2,#edf2f7);--theme-ui-colors-gray-3:var(--theme-ui-colors-gray-3,#e2e8f0);--theme-ui-colors-gray-4:var(--theme-ui-colors-gray-4,#cbd5e0);--theme-ui-colors-gray-5:var(--theme-ui-colors-gray-5,#a0aec0);--theme-ui-colors-gray-6:var(--theme-ui-colors-gray-6,#718096);--theme-ui-colors-gray-7:var(--theme-ui-colors-gray-7,#4a5568);--theme-ui-colors-gray-8:var(--theme-ui-colors-gray-8,#2d3748);--theme-ui-colors-gray-9:var(--theme-ui-colors-gray-9,#1a202c);--theme-ui-colors-red-0:var(--theme-ui-colors-red-0,null);--theme-ui-colors-red-1:var(--theme-ui-colors-red-1,#fff5f5);--theme-ui-colors-red-2:var(--theme-ui-colors-red-2,#fed7d7);--theme-ui-colors-red-3:var(--theme-ui-colors-red-3,#feb2b2);--theme-ui-colors-red-4:var(--theme-ui-colors-red-4,#fc8181);--theme-ui-colors-red-5:var(--theme-ui-colors-red-5,#f56565);--theme-ui-colors-red-6:var(--theme-ui-colors-red-6,#e53e3e);--theme-ui-colors-red-7:var(--theme-ui-colors-red-7,#c53030);--theme-ui-colors-red-8:var(--theme-ui-colors-red-8,#9b2c2c);--theme-ui-colors-red-9:var(--theme-ui-colors-red-9,#742a2a);--theme-ui-colors-orange-0:var(--theme-ui-colors-orange-0,null);--theme-ui-colors-orange-1:var(--theme-ui-colors-orange-1,#fffaf0);--theme-ui-colors-orange-2:var(--theme-ui-colors-orange-2,#feebc8);--theme-ui-colors-orange-3:var(--theme-ui-colors-orange-3,#fbd38d);--theme-ui-colors-orange-4:var(--theme-ui-colors-orange-4,#f6ad55);--theme-ui-colors-orange-5:var(--theme-ui-colors-orange-5,#ed8936);--theme-ui-colors-orange-6:var(--theme-ui-colors-orange-6,#dd6b20);--theme-ui-colors-orange-7:var(--theme-ui-colors-orange-7,#c05621);--theme-ui-colors-orange-8:var(--theme-ui-colors-orange-8,#9c4221);--theme-ui-colors-orange-9:var(--theme-ui-colors-orange-9,#7b341e);--theme-ui-colors-yellow-0:var(--theme-ui-colors-yellow-0,null);--theme-ui-colors-yellow-1:var(--theme-ui-colors-yellow-1,#fffff0);--theme-ui-colors-yellow-2:var(--theme-ui-colors-yellow-2,#fefcbf);--theme-ui-colors-yellow-3:var(--theme-ui-colors-yellow-3,#faf089);--theme-ui-colors-yellow-4:var(--theme-ui-colors-yellow-4,#f6e05e);--theme-ui-colors-yellow-5:var(--theme-ui-colors-yellow-5,#ecc94b);--theme-ui-colors-yellow-6:var(--theme-ui-colors-yellow-6,#d69e2e);--theme-ui-colors-yellow-7:var(--theme-ui-colors-yellow-7,#b7791f);--theme-ui-colors-yellow-8:var(--theme-ui-colors-yellow-8,#975a16);--theme-ui-colors-yellow-9:var(--theme-ui-colors-yellow-9,#744210);--theme-ui-colors-green-0:var(--theme-ui-colors-green-0,null);--theme-ui-colors-green-1:var(--theme-ui-colors-green-1,#f0fff4);--theme-ui-colors-green-2:var(--theme-ui-colors-green-2,#c6f6d5);--theme-ui-colors-green-3:var(--theme-ui-colors-green-3,#9ae6b4);--theme-ui-colors-green-4:var(--theme-ui-colors-green-4,#68d391);--theme-ui-colors-green-5:var(--theme-ui-colors-green-5,#48bb78);--theme-ui-colors-green-6:var(--theme-ui-colors-green-6,#38a169);--theme-ui-colors-green-7:var(--theme-ui-colors-green-7,#2f855a);--theme-ui-colors-green-8:var(--theme-ui-colors-green-8,#276749);--theme-ui-colors-green-9:var(--theme-ui-colors-green-9,#22543d);--theme-ui-colors-teal-0:var(--theme-ui-colors-teal-0,null);--theme-ui-colors-teal-1:var(--theme-ui-colors-teal-1,#e6fffa);--theme-ui-colors-teal-2:var(--theme-ui-colors-teal-2,#b2f5ea);--theme-ui-colors-teal-3:var(--theme-ui-colors-teal-3,#81e6d9);--theme-ui-colors-teal-4:var(--theme-ui-colors-teal-4,#4fd1c5);--theme-ui-colors-teal-5:var(--theme-ui-colors-teal-5,#38b2ac);--theme-ui-colors-teal-6:var(--theme-ui-colors-teal-6,#319795);--theme-ui-colors-teal-7:var(--theme-ui-colors-teal-7,#2c7a7b);--theme-ui-colors-teal-8:var(--theme-ui-colors-teal-8,#285e61);--theme-ui-colors-teal-9:var(--theme-ui-colors-teal-9,#234e52);--theme-ui-colors-blue-0:var(--theme-ui-colors-blue-0,null);--theme-ui-colors-blue-1:var(--theme-ui-colors-blue-1,#ebf8ff);--theme-ui-colors-blue-2:var(--theme-ui-colors-blue-2,#bee3f8);--theme-ui-colors-blue-3:var(--theme-ui-colors-blue-3,#90cdf4);--theme-ui-colors-blue-4:var(--theme-ui-colors-blue-4,#63b3ed);--theme-ui-colors-blue-5:var(--theme-ui-colors-blue-5,#4299e1);--theme-ui-colors-blue-6:var(--theme-ui-colors-blue-6,#3182ce);--theme-ui-colors-blue-7:var(--theme-ui-colors-blue-7,#2b6cb0);--theme-ui-colors-blue-8:var(--theme-ui-colors-blue-8,#2c5282);--theme-ui-colors-blue-9:var(--theme-ui-colors-blue-9,#2a4365);--theme-ui-colors-indigo-0:var(--theme-ui-colors-indigo-0,null);--theme-ui-colors-indigo-1:var(--theme-ui-colors-indigo-1,#ebf4ff);--theme-ui-colors-indigo-2:var(--theme-ui-colors-indigo-2,#c3dafe);--theme-ui-colors-indigo-3:var(--theme-ui-colors-indigo-3,#a3bffa);--theme-ui-colors-indigo-4:var(--theme-ui-colors-indigo-4,#7f9cf5);--theme-ui-colors-indigo-5:var(--theme-ui-colors-indigo-5,#667eea);--theme-ui-colors-indigo-6:var(--theme-ui-colors-indigo-6,#5a67d8);--theme-ui-colors-indigo-7:var(--theme-ui-colors-indigo-7,#4c51bf);--theme-ui-colors-indigo-8:var(--theme-ui-colors-indigo-8,#434190);--theme-ui-colors-indigo-9:var(--theme-ui-colors-indigo-9,#3c366b);--theme-ui-colors-purple-0:var(--theme-ui-colors-purple-0,null);--theme-ui-colors-purple-1:var(--theme-ui-colors-purple-1,#faf5ff);--theme-ui-colors-purple-2:var(--theme-ui-colors-purple-2,#e9d8fd);--theme-ui-colors-purple-3:var(--theme-ui-colors-purple-3,#d6bcfa);--theme-ui-colors-purple-4:var(--theme-ui-colors-purple-4,#b794f4);--theme-ui-colors-purple-5:var(--theme-ui-colors-purple-5,#9f7aea);--theme-ui-colors-purple-6:var(--theme-ui-colors-purple-6,#805ad5);--theme-ui-colors-purple-7:var(--theme-ui-colors-purple-7,#6b46c1);--theme-ui-colors-purple-8:var(--theme-ui-colors-purple-8,#553c9a);--theme-ui-colors-purple-9:var(--theme-ui-colors-purple-9,#44337a);--theme-ui-colors-pink-0:var(--theme-ui-colors-pink-0,null);--theme-ui-colors-pink-1:var(--theme-ui-colors-pink-1,#fff5f7);--theme-ui-colors-pink-2:var(--theme-ui-colors-pink-2,#fed7e2);--theme-ui-colors-pink-3:var(--theme-ui-colors-pink-3,#fbb6ce);--theme-ui-colors-pink-4:var(--theme-ui-colors-pink-4,#f687b3);--theme-ui-colors-pink-5:var(--theme-ui-colors-pink-5,#ed64a6);--theme-ui-colors-pink-6:var(--theme-ui-colors-pink-6,#d53f8c);--theme-ui-colors-pink-7:var(--theme-ui-colors-pink-7,#b83280);--theme-ui-colors-pink-8:var(--theme-ui-colors-pink-8,#97266d);--theme-ui-colors-pink-9:var(--theme-ui-colors-pink-9,#702459);--theme-ui-colors-grayDark:var(--theme-ui-colors-grayDark,#2d3748);--theme-ui-colors-text:var(--theme-ui-colors-text,#2d3748);--theme-ui-colors-background:var(--theme-ui-colors-background,#fff);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#2b6cb0);--theme-ui-colors-primaryHover:var(--theme-ui-colors-primaryHover,#2c5282);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#718096);--theme-ui-colors-muted:var(--theme-ui-colors-muted,#e2e8f0);--theme-ui-colors-success:var(--theme-ui-colors-success,#9ae6b4);--theme-ui-colors-info:var(--theme-ui-colors-info,#63b3ed);--theme-ui-colors-warning:var(--theme-ui-colors-warning,#faf089);--theme-ui-colors-danger:var(--theme-ui-colors-danger,#feb2b2);--theme-ui-colors-light:var(--theme-ui-colors-light,#f7fafc);--theme-ui-colors-dark:var(--theme-ui-colors-dark,#2d3748);--theme-ui-colors-textMuted:var(--theme-ui-colors-textMuted,#718096);--theme-ui-colors-toggleIcon:var(--theme-ui-colors-toggleIcon,#2d3748);--theme-ui-colors-heading:var(--theme-ui-colors-heading,#000);--theme-ui-colors-divide:var(--theme-ui-colors-divide,#cbd5e0);color:var(--theme-ui-colors-text,#2d3748);background-color:var(--theme-ui-colors-background,#fff);}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,#cbd5e0);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#63b3ed);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,#7f8ea3);--theme-ui-colors-toggleIcon:var(--theme-ui-colors-modes-dark-toggleIcon,#cbd5e0);--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#1A202C);--theme-ui-colors-heading:var(--theme-ui-colors-modes-dark-heading,#fff);--theme-ui-colors-divide:var(--theme-ui-colors-modes-dark-divide,#2d3748);--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,#2d3748);}</style><style data-emotion-css="tm2q0o">*{box-sizing:border-box;}body{margin:0;font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.625;font-weight:400;color:var(--theme-ui-colors-text,#2d3748);background-color:var(--theme-ui-colors-background,#fff);padding:0;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="kcr4c7">*{box-sizing:inherit;}html{-webkit-text-size-adjust:100%;}img{border-style:none;}pre{font-family:monospace;font-size:1em;}[hidden]{display:none;}::selection{background-color:var(--theme-ui-colors-text,#2d3748);color:var(--theme-ui-colors-background,#fff);}a{-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;color:text;}</style><style data-emotion-css="1g597hz">.css-1g597hz{border:0;-webkit-clip:react(0 0 0 0);clip:react(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute;}.css-1g597hz:focus{padding:1rem;position:fixed;top:15px;left:15px;background-color:var(--theme-ui-colors-heading,#000);color:var(--theme-ui-colors-background,#fff);z-index:1;width:auto;height:auto;-webkit-clip:auto;clip:auto;-webkit-text-decoration:none;text-decoration:none;}</style><a href="#skip-nav" data-skip-link="true" class="css-1g597hz">Skip to content</a><style data-emotion-css="1jrqzhj">.css-1jrqzhj{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:container;margin-left:auto;margin-right:auto;padding:1rem;max-width:1024px;}@media screen and (min-width:640px){.css-1jrqzhj{padding:2rem;}}</style><div class="css-1jrqzhj"><style data-emotion-css="hqxvh2">.css-hqxvh2{margin-bottom:1rem;border-bottom-width:1px;border-bottom-color:var(--theme-ui-colors-divide,#cbd5e0);border-bottom-style:solid;}@media screen and (min-width:640px){.css-hqxvh2{margin-bottom:2rem;}}</style><header class="css-hqxvh2"><style data-emotion-css="zcxndt">.css-zcxndt{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion-css="10nf7hq">.css-10nf7hq{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-10nf7hq"><style data-emotion-css="dz3ojy">.css-dz3ojy{color:var(--theme-ui-colors-heading,#000);-webkit-text-decoration:none;text-decoration:none;}</style><a aria-label="Daniel P. Gross - Back to home" class="css-dz3ojy" href="/"><style data-emotion-css="zhfaww">.css-zhfaww{margin-top:0;margin-bottom:0;font-weight:500;font-size:1.3rem;}@media screen and (min-width:640px){.css-zhfaww{font-size:1.6rem;}}</style><div class="css-zhfaww">Daniel P. Gross</div></a><style data-emotion-css="i9gxme">.css-i9gxme{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="css-i9gxme"></div><style data-emotion-css="1iqi2nv">.css-1iqi2nv{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:1rem;margin-right:1rem;padding-bottom:1rem;color:var(--theme-ui-colors-secondary,#718096);-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;}.css-1iqi2nv a{color:var(--theme-ui-colors-secondary,#718096);}.css-1iqi2nv a:hover{color:var(--theme-ui-colors-heading,#000);}</style><div class="css-1iqi2nv"><style data-emotion-css="nrb238">.css-nrb238{font-size:1rem;}.css-nrb238 a:not(:last-of-type){margin-right:1rem;}@media screen and (min-width:640px){.css-nrb238{font-size:18px;}}.css-nrb238 .active{color:var(--theme-ui-colors-heading,#000);}</style><nav class="css-nrb238"><style data-emotion-css="1y5zoos">.css-1y5zoos{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary,#2b6cb0);-webkit-text-decoration:none;text-decoration:none;}.css-1y5zoos:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-1y5zoos" href="/">Home</a><a class="css-1y5zoos" href="/about">About</a><a class="css-1y5zoos" href="/blog">Blog</a></nav></div><style data-emotion-css="af3ja4">.css-af3ja4{opacity:0.65;position:relative;border-radius:5px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;border:none;outline:none;background:none;cursor:pointer;padding:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;}.css-af3ja4:hover,.css-af3ja4:focus{opacity:1;}</style><button type="button" aria-label="Activate Dark Mode" title="Activate Dark Mode" class="css-af3ja4"><style data-emotion-css="iiu7h7">.css-iiu7h7{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent,transparent);-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:all 0.45s ease;transition:all 0.45s ease;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon,#2d3748);}.css-iiu7h7:before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:-webkit-transform 0.45s ease;-webkit-transition:transform 0.45s ease;transition:transform 0.45s ease;}.css-iiu7h7:after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon,#2d3748),0 23px 0 var(--theme-ui-colors-toggleIcon,#2d3748),23px 0 0 var(--theme-ui-colors-toggleIcon,#2d3748),-23px 0 0 var(--theme-ui-colors-toggleIcon,#2d3748),15px 15px 0 var(--theme-ui-colors-toggleIcon,#2d3748),-15px 15px 0 var(--theme-ui-colors-toggleIcon,#2d3748),15px -15px 0 var(--theme-ui-colors-toggleIcon,#2d3748),-15px -15px 0 var(--theme-ui-colors-toggleIcon,#2d3748);-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);-webkit-transition:all 0.35s ease;transition:all 0.35s ease;}</style><div class="css-iiu7h7"></div></button></div></header><style data-emotion-css="1tgehn6">.css-1tgehn6 [data-name='live-editor']{font-size:1rem;}.css-1tgehn6 [data-name='live-editor'] textarea,.css-1tgehn6 [data-name='live-editor'] pre{padding:1rem !important;}.css-1tgehn6 [data-name='live-preview']{padding:calc(0.5rem + 10px) !important;background-color:#bfd2e7;}.css-1tgehn6 .prism-code{font-size:1rem;padding:2rem 1rem 1rem 1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent,transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width:640px){.css-1tgehn6 .prism-code{font-size:1rem;}}@media screen and (min-width:768px){.css-1tgehn6 .prism-code{font-size:1.1rem;}}.css-1tgehn6 .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-1tgehn6 .gatsby-highlight[data-language=''] .prism-code,.css-1tgehn6 .gatsby-highlight[data-language='noLineNumbers'] .prism-code{padding-top:1rem;}.css-1tgehn6 .token{display:inline-block;}.css-1tgehn6 p > code,.css-1tgehn6 li > code{background-color:var(--theme-ui-colors-gray-2,#edf2f7);color:var(--theme-ui-colors-gray-8,#2d3748);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:2px;}.css-1tgehn6 .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;background-color:rgb(1,22,39);border-radius:2px;margin-left:0;margin-right:0;}@media screen and (min-width:640px){.css-1tgehn6 .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width:768px){.css-1tgehn6 .gatsby-highlight{font-size:1.1rem;margin-left:0;margin-right:0;}}@media screen and (min-width:1024px){.css-1tgehn6 .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-1tgehn6 .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-1tgehn6 .gatsby-highlight pre code{float:left;min-width:100%;}.css-1tgehn6 .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white,#fff);border-radius:0 0 0.25rem 0.25rem;color:var(--theme-ui-colors-black,#000);font-size:12px;-webkit-letter-spacing:0.025rem;-moz-letter-spacing:0.025rem;-ms-letter-spacing:0.025rem;letter-spacing:0.025rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;top:0;}.css-1tgehn6 .gatsby-highlight pre[class~="language-javascript"]:before,.css-1tgehn6 .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black,#000);}.css-1tgehn6 .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-1tgehn6 .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-1tgehn6 .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-1tgehn6 .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-1tgehn6 .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-1tgehn6 .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-1tgehn6 .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-1tgehn6 .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black,#000);}.css-1tgehn6 .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black,#000);}.css-1tgehn6 .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black,#000);}.css-1tgehn6 .gatsby-highlight pre[class~="language-py"]:before,.css-1tgehn6 .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white,#fff);}.css-1tgehn6 .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-1tgehn6 .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-1tgehn6 .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-1tgehn6 .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-1tgehn6 .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-1tgehn6 .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-1tgehn6 .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-1tgehn6 .gatsby-highlight pre[class~='language-json']:before,.css-1tgehn6 .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-1tgehn6 .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-1tgehn6 .gatsby-highlight > code[class*="language-"],.css-1tgehn6 .gatsby-highlight > pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1tgehn6 .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-1tgehn6 .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary,#2b6cb0);}.css-1tgehn6 .gatsby-highlight pre::-webkit-scrollbar-track{background:rgb(1,22,39);}.css-1tgehn6 .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-1tgehn6 .code-title{background-color:#bfd2e7;color:var(--theme-ui-colors-black,#000);font-size:0.75rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;margin-left:0;margin-right:0;}@media screen and (min-width:640px){.css-1tgehn6 .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width:768px){.css-1tgehn6 .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width:1024px){.css-1tgehn6 .code-title{margin-left:-1rem;margin-right:-1rem;}}.css-1tgehn6 [data-name='live-preview'],.css-1tgehn6 [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}@media screen and (min-width:640px){.css-1tgehn6 [data-name='live-preview'],.css-1tgehn6 [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}}@media screen and (min-width:768px){.css-1tgehn6 [data-name='live-preview'],.css-1tgehn6 [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1.1rem;}}@media screen and (min-width:1024px){.css-1tgehn6 [data-name='live-preview'],.css-1tgehn6 [data-name='live-editor']{margin-left:-1rem;margin-right:-1rem;}}.css-1tgehn6 .token-line{padding-right:1rem;}.css-1tgehn6 .highlight-line{background-color:rgb(2,55,81);border-left:4px solid rgb(2,155,206);}.css-1tgehn6 .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-1tgehn6 .react-live-wrapper{position:relative;}.css-1tgehn6 .react-live-wrapper .code-copy-button{right:0;}@media screen and (min-width:640px){.css-1tgehn6 .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width:768px){.css-1tgehn6 .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width:1024px){.css-1tgehn6 .react-live-wrapper .code-copy-button{right:-1rem;}}</style><style data-emotion-css="l4bzul">.css-l4bzul{box-sizing:border-box;margin:0;min-width:0;}.css-l4bzul [data-name='live-editor']{font-size:1rem;}.css-l4bzul [data-name='live-editor'] textarea,.css-l4bzul [data-name='live-editor'] pre{padding:1rem !important;}.css-l4bzul [data-name='live-preview']{padding:calc(0.5rem + 10px) !important;background-color:#bfd2e7;}.css-l4bzul .prism-code{font-size:1rem;padding:2rem 1rem 1rem 1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent,transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width:640px){.css-l4bzul .prism-code{font-size:1rem;}}@media screen and (min-width:768px){.css-l4bzul .prism-code{font-size:1.1rem;}}.css-l4bzul .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-l4bzul .gatsby-highlight[data-language=''] .prism-code,.css-l4bzul .gatsby-highlight[data-language='noLineNumbers'] .prism-code{padding-top:1rem;}.css-l4bzul .token{display:inline-block;}.css-l4bzul p > code,.css-l4bzul li > code{background-color:var(--theme-ui-colors-gray-2,#edf2f7);color:var(--theme-ui-colors-gray-8,#2d3748);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:2px;}.css-l4bzul .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;background-color:rgb(1,22,39);border-radius:2px;margin-left:0;margin-right:0;}@media screen and (min-width:640px){.css-l4bzul .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width:768px){.css-l4bzul .gatsby-highlight{font-size:1.1rem;margin-left:0;margin-right:0;}}@media screen and (min-width:1024px){.css-l4bzul .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-l4bzul .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-l4bzul .gatsby-highlight pre code{float:left;min-width:100%;}.css-l4bzul .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white,#fff);border-radius:0 0 0.25rem 0.25rem;color:var(--theme-ui-colors-black,#000);font-size:12px;-webkit-letter-spacing:0.025rem;-moz-letter-spacing:0.025rem;-ms-letter-spacing:0.025rem;letter-spacing:0.025rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;top:0;}.css-l4bzul .gatsby-highlight pre[class~="language-javascript"]:before,.css-l4bzul .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black,#000);}.css-l4bzul .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-l4bzul .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-l4bzul .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-l4bzul .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-l4bzul .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-l4bzul .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-l4bzul .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-l4bzul .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black,#000);}.css-l4bzul .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black,#000);}.css-l4bzul .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black,#000);}.css-l4bzul .gatsby-highlight pre[class~="language-py"]:before,.css-l4bzul .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white,#fff);}.css-l4bzul .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-l4bzul .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-l4bzul .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-l4bzul .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-l4bzul .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-l4bzul .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-l4bzul .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-l4bzul .gatsby-highlight pre[class~='language-json']:before,.css-l4bzul .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-l4bzul .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-l4bzul .gatsby-highlight > code[class*="language-"],.css-l4bzul .gatsby-highlight > pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-l4bzul .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-l4bzul .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary,#2b6cb0);}.css-l4bzul .gatsby-highlight pre::-webkit-scrollbar-track{background:rgb(1,22,39);}.css-l4bzul .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-l4bzul .code-title{background-color:#bfd2e7;color:var(--theme-ui-colors-black,#000);font-size:0.75rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;margin-left:0;margin-right:0;}@media screen and (min-width:640px){.css-l4bzul .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width:768px){.css-l4bzul .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width:1024px){.css-l4bzul .code-title{margin-left:-1rem;margin-right:-1rem;}}.css-l4bzul [data-name='live-preview'],.css-l4bzul [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}@media screen and (min-width:640px){.css-l4bzul [data-name='live-preview'],.css-l4bzul [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}}@media screen and (min-width:768px){.css-l4bzul [data-name='live-preview'],.css-l4bzul [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1.1rem;}}@media screen and (min-width:1024px){.css-l4bzul [data-name='live-preview'],.css-l4bzul [data-name='live-editor']{margin-left:-1rem;margin-right:-1rem;}}.css-l4bzul .token-line{padding-right:1rem;}.css-l4bzul .highlight-line{background-color:rgb(2,55,81);border-left:4px solid rgb(2,155,206);}.css-l4bzul .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-l4bzul .react-live-wrapper{position:relative;}.css-l4bzul .react-live-wrapper .code-copy-button{right:0;}@media screen and (min-width:640px){.css-l4bzul .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width:768px){.css-l4bzul .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width:1024px){.css-l4bzul .react-live-wrapper .code-copy-button{right:-1rem;}}</style><div id="skip-nav" class=" css-l4bzul"><style data-emotion-css="7c8i03">.css-7c8i03{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:500;line-height:1.25;font-family:inherit;font-weight:500;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.8rem;margin-top:2rem;color:var(--theme-ui-colors-heading,#000);}@media screen and (min-width:640px){.css-7c8i03{font-size:2rem;}}@media screen and (min-width:768px){.css-7c8i03{font-size:2rem;}}@media screen and (min-width:1024px){.css-7c8i03{font-size:2.6rem;}}</style><h1 class="css-7c8i03">Building a battery-powered wireless sensor using Bluetooth Low-Energy (BLE) and Apple HomeKit (Part 1)</h1><style data-emotion-css="12mg7v7">.css-12mg7v7{color:var(--theme-ui-colors-secondary,#718096);margin-top:1rem;font-size:1rem;}.css-12mg7v7 a{color:var(--theme-ui-colors-secondary,#718096);}@media screen and (min-width:640px){.css-12mg7v7{font-size:1rem;}}@media screen and (min-width:768px){.css-12mg7v7{font-size:1.1rem;}}</style><p class="css-12mg7v7"><time>2017-05-25</time> — <a class="css-1y5zoos" href="/tags/hardware">hardware</a>, <a class="css-1y5zoos" href="/tags/software">software</a>, <a class="css-1y5zoos" href="/tags/internet-of-things">internet-of-things</a>, <a class="css-1y5zoos" href="/tags/bluetooth-low-energy">bluetooth-low-energy</a>, <a class="css-1y5zoos" href="/tags/arduino">arduino</a>, <a class="css-1y5zoos" href="/tags/c">c</a>, <a class="css-1y5zoos" href="/tags/homekit">homekit</a>, <a class="css-1y5zoos" href="/tags/nrf-52832">nrf52832</a> — <span>5<!-- --> min read</span></p><style data-emotion-css="f0b8g7">.css-f0b8g7{margin-top:4rem;margin-bottom:4rem;}.css-f0b8g7 .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;box-shadow:rgba(0,0,0,0.15) 0px 32px 32px 0px,rgba(0,0,0,0.15) 0px 16px 16px 0px,rgba(0,0,0,0.15) 0px 8px 8px 0px,rgba(0,0,0,0.15) 0px 4px 4px 0px;}@media screen and (min-width:640px){.css-f0b8g7 .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;}}@media screen and (min-width:768px){.css-f0b8g7 .gatsby-resp-image-wrapper{margin-top:4rem;margin-bottom:4rem;}}</style><section class="css-f0b8g7"><style data-emotion-css="ocxwk4">.css-ocxwk4{font-size:1rem;-webkit-letter-spacing:-0.003em;-moz-letter-spacing:-0.003em;-ms-letter-spacing:-0.003em;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width:640px){.css-ocxwk4{font-size:1rem;}}@media screen and (min-width:768px){.css-ocxwk4{font-size:1.1rem;}}</style><p class="css-ocxwk4">In this series, we&#x27;ll look at building a simple wireless temperature and humidity sensor using inexpensive components and Bluetooth Low Energy (BLE) for communication. We&#x27;ll read off the sensor values using the Home app from an iOS device.</p><style data-emotion-css="992wu8">.css-992wu8{font-family:inherit;font-weight:500;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.6rem;margin-top:2rem;color:var(--theme-ui-colors-heading,#000);}@media screen and (min-width:640px){.css-992wu8{font-size:1.8rem;}}@media screen and (min-width:768px){.css-992wu8{font-size:1.8rem;}}@media screen and (min-width:1024px){.css-992wu8{font-size:2rem;}}</style><h2 class="css-992wu8">Motivation</h2><p class="css-ocxwk4">This project originally started when I got a new humidifier at home and wanted an easy way to tell when the humidity levels were too low. After searching in vain for an inexpensive HomeKit-compatible sensor, I decided to see if I could build one myself from cheap components.</p><p class="css-ocxwk4">I wanted my sensor to:</p><style data-emotion-css="aq9zkf">.css-aq9zkf li{font-size:1rem;-webkit-letter-spacing:-0.003em;-moz-letter-spacing:-0.003em;-ms-letter-spacing:-0.003em;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width:640px){.css-aq9zkf li{font-size:1rem;}}@media screen and (min-width:768px){.css-aq9zkf li{font-size:1.1rem;}}</style><ul class="css-aq9zkf"><li class="css-0">Have a low cost to build</li><li class="css-0">Have low power consumption, be capable of running from a few AA batteries for ~1 year (or at least a few months)</li><li class="css-0">Transmit sensor values that could be easily viewed from my smartphone</li></ul><p class="css-ocxwk4">After some brief research, I chose <strong class="css-0">Bluetooth Low Energy (BLE)</strong> and <strong class="css-0">Apple HomeKit</strong> as the 2 basic implementation technologies for this project.</p><style data-emotion-css="3omw84">.css-3omw84{font-family:inherit;font-weight:500;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.3rem;margin-top:2rem;color:var(--theme-ui-colors-heading,#000);}@media screen and (min-width:640px){.css-3omw84{font-size:1.6rem;}}@media screen and (min-width:768px){.css-3omw84{font-size:1.6rem;}}@media screen and (min-width:1024px){.css-3omw84{font-size:1.8rem;}}</style><h3 class="css-3omw84">Why HomeKit?</h3><p class="css-ocxwk4"><style data-emotion-css="1i9b1eb">.css-1i9b1eb{color:var(--theme-ui-colors-primary,#2b6cb0);-webkit-text-decoration:none;text-decoration:none;}.css-1i9b1eb:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://developer.apple.com/homekit/" class="css-1i9b1eb">HomeKit</a> is a relatively new (2014) framework developed by Apple to enable advanced, centralized home-automation control with tight integration inside the iOS ecosystem. HomeKit is making it easy for ordinary, non-technical people to set up elaborate home automation schemes, with an intuitive control interface (the iOS Home app), preset device state collections called &quot;scenes&quot;, and voice control (via Siri).</p><p class="css-ocxwk4">Some people might be surprised to learn that home automation has actually been around for decades, and there have been <a href="https://en.wikipedia.org/wiki/X10_%28industry_standard%29" class="css-1i9b1eb">comprehensive wireless control system</a>s since the mid-1970s. There is an entire market of controllers, switches and &quot;smart&quot; (dumb by today&#x27;s standards) devices that existed long before HomeKit or even the first iPhone.</p><p class="css-ocxwk4">So why does it seem that only now are we starting to hear about the smart home revolution? I think it&#x27;s for the same reason that it wasn&#x27;t until the mid-1980s that we didn&#x27;t hear about the personal computer revolution. Like it has with many technologies before, Apple is bringing smart home device technology out of the realm of engineers, academics, and basement-dwelling geeks and into the hands of ordinary non-technical folk. Apple has a knack for making complex technical systems accessible through simple, intuitive interfaces. With this combination of user-friendliness and tight Apple ecosystem integration (e.g. &quot;Siri, turn on the light&quot;), I think HomeKit is poised to bring home automation into the mainstream at greater proportions than ever before.</p><p class="css-ocxwk4">Considering all that, HomeKit is a technology that I was eager to start playing with and learning about.</p><h3 class="css-3omw84">Why Bluetooth Low Energy?</h3><p class="css-ocxwk4">Bluetooth Low Energy (BLE) is an open wireless data transmission standard that was introduced by Nokia in the late 2000s, offering near-range communication at low throughput rates (~0.3Mbit/s), with very low power requirements (in the 0.01 - 0.5W range). </p><p class="css-ocxwk4">Since the introduction of the BLE standard, the market has seen a flood of new BLE-compatible devices. The inclusion of BLE in smartphones, notably the iPhone (since the 4S model), has encouraged wireless peripheral manufacturers to utilize BLE, and this in turn has induced further proliferation of BLE-capable hub devices. A <a href="https://www.abiresearch.com/press/bluetooth-low-energy-devices-account-27-total-blue/" class="css-1i9b1eb">report by ABI Research</a> forecasts growth of Bluetooth Low Energy device production by 34% between 2016 and 2021, with BLE devices comprising 27% of total Bluetooth shipments by 2021.</p><p class="css-ocxwk4">BLE&#x27;s power characteristics make it an excellent candidate technology for data transmission in this project. Although there are other technologies we could have used here instead, for example <a href="https://en.wikipedia.org/wiki/Zigbee" class="css-1i9b1eb">ZigBee</a> or <a href="https://en.wikipedia.org/wiki/ANT_(network)" class="css-1i9b1eb">ANT</a>, I was most interested to get to know the mechanics of BLE because of its prevalence in the marketplace and its expected growth in the years to come.</p><h2 class="css-992wu8">Solutions</h2><p class="css-ocxwk4">HomeKit is a closed, proprietary protocol developed solely by Apple. Its specifications are only available to Apple MFi program members. I&#x27;m not an MFi program member and don&#x27;t have access to those specifications, so we won&#x27;t go into much detail here about the HomeKit protocol.</p><p class="css-ocxwk4">HomeKit fundamentally operates over 2 network protocols: </p><ol class="css-aq9zkf"><li class="css-0">IP (over a wired or wireless LAN)</li><li class="css-0">Bluetooth Low Energy (BLE)</li></ol><p class="css-ocxwk4">The de-facto standard software implementation of HomeKit Accessory Protocol (HAP) is the closed-source OberonHAP software developed by <a href="https://oberonhap.com/products/" class="css-1i9b1eb">Oberon</a>. Although I haven&#x27;t worked with it myself, according to Oberon it is the best implementation available, performing a few times faster and consuming less memory than any alternative implementation.</p><p class="css-ocxwk4">Luckily, for hobbyists like myself, there are a number of reasonably high-quality open-source HAP implementations. I&#x27;ve listed some of them below:</p><style data-emotion-css="f4lqjx">.css-f4lqjx{width:100%;margin-top:2rem;margin-bottom:2rem;border-collapse:separate;border-spacing:0;}.css-f4lqjx th,.css-f4lqjx td{text-align:left;padding-top:4px;padding-bottom:4px;padding-right:4px;padding-left:0;border-color:var(--theme-ui-colors-muted,#e2e8f0);border-bottom-style:solid;}</style><table class="css-f4lqjx"><thead><tr class="css-0"><style data-emotion-css="18ma8h6">.css-18ma8h6{vertical-align:bottom;border-bottom-width:2px;color:var(--theme-ui-colors-heading,#000);}</style><th class="css-18ma8h6">Project</th><th class="css-18ma8h6">Network type</th><th class="css-18ma8h6">Language</th></tr></thead><tbody><tr class="css-0"><style data-emotion-css="15msde0">.css-15msde0{vertical-align:top;border-bottom-width:1px;}</style><td class="css-15msde0"><a href="https://github.com/KhaosT/HAP-NodeJS" class="css-1i9b1eb">KhaosT/HAP-NodeJS</a></td><td class="css-15msde0">IP</td><td class="css-15msde0">Javascript (node.js)</td></tr><tr class="css-0"><td class="css-15msde0"><a href="https://github.com/brutella/hc" class="css-1i9b1eb">brutella/hc</a></td><td class="css-15msde0">IP</td><td class="css-15msde0">Golang</td></tr><tr class="css-0"><td class="css-15msde0"><a href="https://github.com/beowulfe/HAP-Java" class="css-1i9b1eb">beowulfe/HAP-Java</a></td><td class="css-15msde0">IP</td><td class="css-15msde0">Java</td></tr><tr class="css-0"><td class="css-15msde0"><a href="https://github.com/etwmc/Personal-HomeKit-HAP" class="css-1i9b1eb">etwmc/Personal-HomeKit-HAP</a></td><td class="css-15msde0">IP</td><td class="css-15msde0">C++</td></tr><tr class="css-0"><td class="css-15msde0"><a href="https://github.com/Bouke/HAP" class="css-1i9b1eb">Bouke/HAP</a></td><td class="css-15msde0">IP</td><td class="css-15msde0">Swift</td></tr><tr class="css-0"><td class="css-15msde0"><a href="https://github.com/aanon4/HomeKit" class="css-1i9b1eb">aanon4/HomeKit</a></td><td class="css-15msde0">BLE</td><td class="css-15msde0">C++</td></tr></tbody></table><p class="css-ocxwk4">Of those projects, the IP-based implementations are the most mature, by far.</p><h3 class="css-3omw84">Network topologies</h3><p class="css-ocxwk4">Next, I needed to decide how the sensor values would be read using a smartphone. I considered a few network topologies (arrangements of the devices in a network):</p><style data-emotion-css="1pmnorg">.css-1pmnorg{font-family:inherit;font-weight:500;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.1rem;color:var(--theme-ui-colors-heading,#000);margin-top:1rem;}@media screen and (min-width:640px){.css-1pmnorg{font-size:1.3rem;}}@media screen and (min-width:768px){.css-1pmnorg{font-size:1.3rem;}}@media screen and (min-width:1024px){.css-1pmnorg{font-size:1.6rem;}}</style><h4 class="css-1pmnorg">Option 1: Arduino-based dumb sensor + wifi-connected bridge</h4><p class="css-ocxwk4">This option made sense because I already had an Arduino Uno, and I knew that Arduino-compatible BLE transceivers could be had for relatively cheap.</p><img src="/static/option1-0f9242f7ee886358fcc57c1a4651861b.svg" class="css-0"/><style data-emotion-css="m4uvnn">.css-m4uvnn{font-family:inherit;font-weight:500;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1rem;color:var(--theme-ui-colors-heading,#000);margin-top:1rem;}@media screen and (min-width:640px){.css-m4uvnn{font-size:1.1rem;}}@media screen and (min-width:768px){.css-m4uvnn{font-size:1.1rem;}}@media screen and (min-width:1024px){.css-m4uvnn{font-size:1.3rem;}}</style><h5 class="css-m4uvnn"><em class="css-0">Evaluating Option 1</em></h5><p class="css-ocxwk4">One of the first things I did was to estimate the sensor&#x27;s power consumption in this arrangement. Even in a low-power configuration, an <a href="http://www.gammon.com.au/power" class="css-1i9b1eb">Arduino Uno draws about <strong class="css-0">35mA</strong> at idle</a>. With 3 × 2500mAh batteries, this would only yield us <em class="css-0">~1 week of battery life</em>, without even considering that current would also be drawn by the BLE module and sensor. This is far from satisfying our requirement of running on batteries for at least a few months, so I was back to the drawing board.</p><p class="css-ocxwk4">I began to look into <a href="https://www.arduino.cc/en/Main/arduinoBoardNano" class="css-1i9b1eb">Arduino Nano</a> and even using a bare ATmega328 in an attempt to reduce power consumption. It was at this point that I discovered the <a href="https://www.nordicsemi.com/eng/Products/Bluetooth-low-energy/nRF52832" class="css-1i9b1eb">Nordic Semiconductor nRF52832 SoC</a> with an integrated BLE transceiver, with an operating current draw of about <strong class="css-0">50μA</strong> — 3 orders of magnitude smaller than the Uno! This was a major breakthrough, since the nRF5 was capable of replacing the Arduino + BLE module combination, in a smaller package, with lower power consumption, and at a low cost. <!-- -->[In the next blog post, I&#x27;ll discuss the nRF5 in more detail]<!-- -->. So I moved on to the next option, based on the nRF5.</p><h4 class="css-1pmnorg">Option 2: nRF-based smart sensor</h4><p class="css-ocxwk4">With the next solution, I attempted to simplify the system as much as possible. Having eliminated the need for a separate microcontroller (the Arduino), I wondered if I could also remove the need for a separate HomeKit BLE-to-WiFi bridge.</p><img src="/static/option2-1ebb0af5ab8207598bbe49c72addc803.svg" class="css-0"/><h5 class="css-m4uvnn"><em class="css-0">Evaluating Option 2</em></h5><p class="css-ocxwk4">The major issue blocking this route turned out to be an issue of <strong class="css-0">software</strong>, i.e. the absence of a mature open-source implementation of HAP over BLE. As shown in the table above, I only found a single BLE HAP server: <a href="https://github.com/aanon4/HomeKit" class="css-1i9b1eb">aanon4/HomeKit</a>. Unfortunately, at the time of writing, it is immature, poorly documented, unmaintained, and written in C. For a hobbyist like myself, debugging issues with C code running on the nRF5 would be a significant challenge and time commitment. Therefore, this option was a no-go.</p><p class="css-ocxwk4">It&#x27;s worth noting, though, that this is not a fundamental flaw in this topology. If this were a real product, OberonHAP could probably be used to implement HAP over BLE quite easily.</p><h4 class="css-1pmnorg">Option 3: nRF-based dumb sensor + wifi-connected bridge</h4><p class="css-ocxwk4">The final option was a combination of Option 1 and Option 2; I simply added the HAP WiFi bridge from Option 1 back into the topology of Option 2.</p><img src="/static/option3-df59107b2ed50a6e935d7178c3a0ab82.svg" class="css-0"/><h5 class="css-m4uvnn"><em class="css-0">Evaluating Option 3</em></h5><p class="css-ocxwk4">With this option, I was able to maintain the improved sensor power consumption characteristics from Option 2, while overcoming the HAP server software roadblock. This option seemed to finally be a path to a viable solution. Success!</p><h2 class="css-992wu8">Conclusion and Next Steps</h2><p class="css-ocxwk4">Having chosen a workable high-level design and network topology, the next steps were to:</p><ul class="css-aq9zkf"><li class="css-0">Implement BLE sensor value broadcasting on the nRF5</li><li class="css-0">Implement a BLE ⟷ HAP-over-IP sensor bridge</li></ul><p class="css-ocxwk4">In the next post, I&#x27;ll discuss the hardware used in this project, and we&#x27;ll get into the BLE sensor broadcasting implementation.</p><h5 class="css-m4uvnn">See what happens next in <a href="/blog/ble-homekit-sensor-pt2" class="css-1i9b1eb">Part 2</a>!</h5></section></div><style data-emotion-css="12jsbhh">.css-12jsbhh{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:8rem;color:var(--theme-ui-colors-secondary,#718096);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide,#cbd5e0);padding-top:1rem;}.css-12jsbhh a{color:var(--theme-ui-colors-secondary,#718096);-webkit-text-decoration:none;text-decoration:none;}.css-12jsbhh a:hover{color:var(--theme-ui-colors-heading,#000);-webkit-text-decoration:underline;text-decoration:underline;}.css-12jsbhh a:focus{color:var(--theme-ui-colors-heading,#000);}@media screen and (min-width:640px){.css-12jsbhh{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media screen and (min-width:768px){.css-12jsbhh{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><footer class="css-12jsbhh"><div>© <!-- -->2021<!-- --> by <!-- -->Daniel P. Gross<!-- -->. All rights reserved.</div><div><a aria-label="Link to the theme&#x27;s GitHub repository" href="https://github.com/LekoArts/gatsby-themes/tree/master/themes/gatsby-theme-minimal-blog" class="css-1y5zoos">gatsby-theme-minimal-blog</a> <!-- -->on<!-- --> <a href="https://www.gatsbyjs.com/" class="css-1y5zoos">GatsbyJS</a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/ble-homekit-sensor-pt1";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-d315eb99cbdcd89ab179.js"],"app":["/app-61629059a767a2c5dd4b.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-ad6431e4664bcf916d19.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx-f7bd372c9a04a4f2d379.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx-2e76ab67dcd52ecfa1ec.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-6aef444c836abd087a83.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-82ea993409075bcdefe9.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx-24e639ccecd169140c07.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx-8175ee31937b27f0b9ab.js"]};/*]]>*/</script><script src="/polyfill-d315eb99cbdcd89ab179.js" nomodule=""></script><script src="/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-82ea993409075bcdefe9.js" async=""></script><script src="/aed2e917f30c051bccba91aa15989a75fd0bd633-7af1ba497f02303e5a48.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-61629059a767a2c5dd4b.js" async=""></script><script src="/1bfc9850-ae6f6e854d81acd9ae43.js" async=""></script><script src="/framework-beda7bde9d7dca0755ce.js" async=""></script><script src="/webpack-runtime-0b36765783ddb57012e0.js" async=""></script></body></html>